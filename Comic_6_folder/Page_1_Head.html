<html lang="en-us">
  <head>
     <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=0.5">
   <link rel="stylesheet" href="../main.css">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet"> 
    <title>Off 2 Comic</title>
      <link rel = "icon" href="../Assets/icon_head_96x96.png" type = "image/png" sizes="96x96"> <link rel="shortcut icon" href="../Assets/favicon.ico" /><link rel="icon" type="image/svg+xml" href="../Assets/favicon.svg" />  
    </head> <body>
 
  <a href="Page_1_interactable.html"><img src="../Assets/back.png" class="go_back" id="testFlash"></a>
<div class="picture_centerer">
  <div class="zoom-scope">
    <div class="click-zoom2">
      <label>
        <input type="checkbox">
        <img id="mainImage" src="Assets_Comic_6/Comic6_Page_1_Head.jpg" class="page1">
        <img id="mainImageFlash" class="page1" style="display: none;">
      </label>
    </div>
    <div class="text-overlay" id="Head_Page_1">
      How can a statue bleed?
    </div>
  </div>
</div>


    <!--<button id="testFlash">Test Flash Now</button>-->

<script>
document.addEventListener("DOMContentLoaded", () => {
  const replacementImages = ["./Assets_Comic_6/I_SEE_YOU.jpg"];
  const imageElement = document.getElementById("mainImage");
  const originalSrc = imageElement.src;
  const redirectLink = "Page_1_interactable.html";
  const flashChance = 0.9; // you can change this to e.g., 0.5 for 50% chance

  // Track if flash has happened
  let hasFlashed = localStorage.getItem("imageFlashed") === "true";

  // ADDED: reference to text overlay
  const textOverlay = document.querySelector(".text-overlay");

  function flashImage(event) {
    // Only flash if it hasnâ€™t already flashed
    if (hasFlashed) return;

    // Random chance check
    if (Math.random() < flashChance) return;

    hasFlashed = true;
    localStorage.setItem("imageFlashed", "true");
    event?.preventDefault();

    // ADDED: remove text overlay ONLY when flash fires
    if (textOverlay) textOverlay.remove();

    // Pick a random replacement image
    const randomIndex = Math.floor(Math.random() * replacementImages.length);
    imageElement.src = replacementImages[randomIndex];

    // Restore original and navigate after 1s
    setTimeout(() => {
      imageElement.src = originalSrc;
      window.location.href = redirectLink;
    }, 4000);
  }

  // Add click event to your back link
  const backLink = document.querySelector("a");
  backLink.addEventListener("click", (e) => flashImage(e));
});
</script>
 </body> 
</html> 